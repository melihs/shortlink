pyroscope:
  enabled: true

  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: cert-manager-production
      nginx.ingress.kubernetes.io/enable-modsecurity: "false"
      nginx.ingress.kubernetes.io/enable-owasp-core-rules: "false"
      nginx.ingress.kubernetes.io/enable-opentracing: "false"
      nginx.ingress.kubernetes.io/rewrite-target: /$1
      nginx.ingress.kubernetes.io/use-regex: "true"

    hosts:
      - host: shortlink.best
        paths:
          - path: /pyroscope/?(.*)
            pathType: Prefix

    tls:
      - secretName: shortlink-ingress-tls
        hosts:
          - shortlink.best

  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 20m
      memory: 64Mi

pyroscope-ebpf:
  enabled: true

  args:
    - "ebpf"
    - "--application-name"
    - "k8s.ebpf"
    - "--server-address"
    - "http://pyroscope-server:4040"
