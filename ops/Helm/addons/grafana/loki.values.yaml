loki:
  enabled: true

  loki:
    commonConfig:
      replication_factor: 1

    storage:
      type: filesystem

  test:
    enabled: false

  write:
    replicas: 1
    persistence:
      storageClass: rook-ceph-block

  read:
    replicas: 1
    persistence:
      storageClass: rook-ceph-block

  singleBinary:
    persistence:
      storageClass: rook-ceph-block

  tableManager:
    enabled: false

  monitoring:
    rules:
      additionalGroups:
        - name: additional-loki-rules
          rules:
            - record: job:loki_request_duration_seconds_bucket:sum_rate
              expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
            - record: job_route:loki_request_duration_seconds_bucket:sum_rate
              expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
            - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
              expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)

  grafana-agent-operator:
    image:
      tag: v0.30.2


