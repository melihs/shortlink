# Common default values for grafana.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Docs: https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml
grafana:
  enabled: true
  namespaceOverride: ""

  # Deploy default dashboards.
  ##
  defaultDashboardsEnabled: true

  # adminPassword: shortlink

  persistence:
    enabled: false
    storageClassName: local-path
    inMemory:
      enabled: true

  revisionHistoryLimit: 2

  serviceMonitor:
    enabled: true
    selfMonitor: true
    interval: "1m"

  imageRenderer:
    enabled: false

    revisionHistoryLimit: 2

    serviceMonitor:
      enabled: true
      selfMonitor: true
      interval: "1m"

  ingress:
    enabled: true

    annotations:
      cert-manager.io/cluster-issuer: cert-manager-production
      nginx.ingress.kubernetes.io/enable-modsecurity: "false"
      nginx.ingress.kubernetes.io/enable-owasp-core-rules: "false"
      nginx.ingress.kubernetes.io/enable-opentracing: "false"

    hosts:
      - grafana.shortlink.best

    path: /

    tls:
      - secretName: grafana-ingress-tls
        hosts:
          - grafana.shortlink.best

  sidecar: {}
#    alerts:
#      enabled: true
#      searchNamespace: ALL
#    dashboards:
#      enabled: false
#      searchNamespace: ALL
#      folder: /tmp/dashboards
#      folderAnnotation: grafana_dashboard_folder
#      provider:
#        foldersFromFilesStructure: true
#    datasources:
#      enabled: true
#      searchNamespace: ALL
#    plugins:
#      enabled: true
#      searchNamespace: ALL
#    notifiers:
#      enabled: true
#      searchNamespace: ALL

#  dashboardProviders:
#    dashboardproviders.yaml:
#      apiVersion: 1
#      providers:
#      - name: 'default'
#        orgId: 1
#        folder: ''
#        type: file
#        disableDeletion: false
#        editable: true
#        options:
#          path: /var/lib/grafana/dashboards/default

#  plugins:
#    - flant-statusmap-panel
#    - grafana-polystat-panel

  grafana.ini:
    reporting:
      enabled: true
