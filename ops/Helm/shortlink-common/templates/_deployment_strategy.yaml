{{/* vim: set filetype=mustache: */}}

{{- define "shortlink-common.deploymentStrategy" }}

{{- if eq .Values.deploy.type "Rollout" -}}
blueGreen:
  activeService: {{ include "helpers.fullname" . }}
  previewService: {{ include "helpers.fullname" . }}-preview
  autoPromotionEnabled: false
{{- else -}}
type: RollingUpdate
rollingUpdate:
  maxSurge: 1
  maxUnavailable: 0
{{- end }}
{{- end }}
