apiVersion: tests.testkube.io/v1
kind: TestTrigger
metadata:
  name: shortlink-landing
  namespace: testkube
spec:
  resource: deployment
  resourceSelector:
    namespace: {{ .Release.Namespace }}
    labelSelector:
      matchLabels:
        {{- include "shortlink-common.matchLabels" . | indent 8 }}
  event: modified
  conditionSpec:
    timeout: 60
    conditions:
      - type: Progressing
        status: "True"
        reason: "NewReplicaSetAvailable"
      - type: Available
        status: "True"
  action: run
  execution: testsuite
  delay: 20s
  testSelector:
    name: shortlink-landing-test-suites
    namespace: testkube
