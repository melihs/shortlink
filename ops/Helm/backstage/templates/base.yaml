{{/* vim: set filetype=mustache: */}}

{{- $defaultConfig := mustDeepCopy . -}}
{{- $mergedIngressUI := mustMergeOverwrite .Values.ingress .Values.ingress_ui -}}
{{- $mergedIngressAPI := mustMergeOverwrite .Values.ingress .Values.ingress_api -}}

{{ $ingressUI := merge $defaultConfig $mergedIngressUI }}
{{ $ingressAPI := merge $defaultConfig $mergedIngressAPI }}

{{ include "shortlink-common.ServiceAccount" . }}

{{ include "shortlink-common.Deployment" . }}

{{ include "shortlink-common.Service" . }}

{{ include "shortlink-common.Ingress" $ingressUI }}
{{ include "shortlink-common.Ingress" $ingressAPI }}
